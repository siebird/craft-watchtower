{% extends 'craft-watchtower/_layouts/base' %}
{% set selectedSubnavItem = 'settings' %}
{% set title  = "General Settings"|t('craft-watchtower') %}
{% set fullPageForm = true %}

{% macro errorList(errors) %}
    {% if errors %}
        <ul class="errors">
            {% for categorizedErrors in errors %}
                {% for error in categorizedErrors %}
                    <li>{{ error }}</li>
                {% endfor %}
            {% endfor %}
        </ul>
    {% endif %}
{% endmacro %}
{% from _self import errorList %}

{% import "_includes/forms" as forms %}
{% block content %}
	<div id="settings-cp">
		{% if errors is defined and errors|length %}
		    <div class="pane">
		        <h3>{{ "Something went wrong!"|t('craft-watchtower') }}</h3>
		        {{ errorList(errors) }}
		    </div>
		    <br>
		{% endif %}

	    {{ csrfInput() }}
	    <input type="hidden" name="action" value="{{ meta.action }}">
	    {{ redirectInput("craft-watchtower/settings") }}

		{% namespace 'settings' %}
			{{ forms.textField({
			    first: true,
			    label: "Plugin Name",
			    name: 'pluginName',
			    value: settings.pluginName,
			    required: true,
			    errors: (settings is defined ? settings.getErrors('pluginName') : null),
			}) }}

			{# <hr> #}

		{% endnamespace %}

		<button class="btn submit" type="submit">{{ 'Save'|t('craft-watchtower') }}</button>
    </div>
{% endblock %}